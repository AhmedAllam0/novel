{
  "name": "âœï¸ Author Profile & Works",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "author-profile",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "auth-001-webhook",
      "name": "Webhook Input",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [0, 0],
      "webhookId": "author-profile-webhook-001"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1",
              "name": "authorName",
              "value": "={{ $json.author || $json.authorName || $json.name }}",
              "type": "string"
            },
            {
              "id": "2",
              "name": "includeBooks",
              "value": "={{ $json.includeBooks !== false }}",
              "type": "boolean"
            },
            {
              "id": "3",
              "name": "language",
              "value": "={{ $json.language || 'ar' }}",
              "type": "string"
            }
          ]
        }
      },
      "id": "auth-002-extract",
      "name": "Extract Input",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [240, 0]
    },
    {
      "parameters": {
        "model": "mistral-large-latest",
        "options": {
          "temperature": 0.3,
          "maxTokens": 2500
        }
      },
      "id": "auth-003-model",
      "name": "Mistral AI",
      "type": "@n8n/n8n-nodes-langchain.lmChatMistralCloud",
      "typeVersion": 1,
      "position": [480, 160],
      "credentials": {
        "mistralCloudApi": {
          "id": "8RlFJeQEIK1RW3KX",
          "name": "Mistral Cloud account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Ù‚Ø¯Ù… Ù…Ù„ÙØ§Ù‹ Ø´Ø§Ù…Ù„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ù…Ø¤Ù„Ù \"{{ $('Extract Input').item.json.authorName }}\"\n\nØ§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (Ø§Ø³ØªØ®Ø¯Ù… HTML ÙÙ‚Ø·):\n\nâœï¸ <b>{{ $('Extract Input').item.json.authorName }}</b>\n\nğŸ‘¤ <b>Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…Ø¤Ù„Ù:</b>\n[ÙÙ‚Ø±Ø© 4-5 Ø£Ø³Ø·Ø± Ø¹Ù† Ø­ÙŠØ§Ø© Ø§Ù„Ù…Ø¤Ù„Ù ÙˆØ£Ù‡Ù…ÙŠØªÙ‡ Ø§Ù„Ø£Ø¯Ø¨ÙŠØ©]\n\nğŸ‚ <b>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©:</b>\nğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: [Ø§Ù„ØªØ§Ø±ÙŠØ®]\nğŸŒ Ø§Ù„Ø¬Ù†Ø³ÙŠØ©: [Ø§Ù„Ø¨Ù„Ø¯]\nğŸ“ Ø§Ù„ØªØ¹Ù„ÙŠÙ…: [Ø§Ù„Ù…Ø¤Ù‡Ù„Ø§Øª]\nğŸ† Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²: [Ø£Ø¨Ø±Ø² Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²]\n\nâœ¨ <b>Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ø£Ø¯Ø¨ÙŠ:</b>\n[ÙˆØµÙ Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙˆØ§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„Ù…ÙØ¶Ù„Ø©]\n\nğŸ“š <b>Ø£Ø´Ù‡Ø± Ø§Ù„Ø£Ø¹Ù…Ø§Ù„:</b>\n1. <i>[Ø§Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø£ÙˆÙ„]</i> ([Ø§Ù„Ø³Ù†Ø©]) - [Ø¬Ù…Ù„Ø© ÙˆØµÙÙŠØ©]\n2. <i>[Ø§Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ]</i> ([Ø§Ù„Ø³Ù†Ø©]) - [Ø¬Ù…Ù„Ø© ÙˆØµÙÙŠØ©]\n3. <i>[Ø§Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø«Ø§Ù„Ø«]</i> ([Ø§Ù„Ø³Ù†Ø©]) - [Ø¬Ù…Ù„Ø© ÙˆØµÙÙŠØ©]\n4. <i>[Ø§Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø±Ø§Ø¨Ø¹]</i> ([Ø§Ù„Ø³Ù†Ø©]) - [Ø¬Ù…Ù„Ø© ÙˆØµÙÙŠØ©]\n5. <i>[Ø§Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø®Ø§Ù…Ø³]</i> ([Ø§Ù„Ø³Ù†Ø©]) - [Ø¬Ù…Ù„Ø© ÙˆØµÙÙŠØ©]\n\nğŸ¯ <b>Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:</b>\nâ€¢ [Ù…ÙˆØ¶ÙˆØ¹ 1]\nâ€¢ [Ù…ÙˆØ¶ÙˆØ¹ 2]\nâ€¢ [Ù…ÙˆØ¶ÙˆØ¹ 3]\n\nğŸ’­ <b>Ø§Ù‚ØªØ¨Ø§Ø³ Ù…Ù…ÙŠØ²:</b>\n<i>\"[Ø§Ù‚ØªØ¨Ø§Ø³ Ø´Ù‡ÙŠØ± Ù„Ù„Ù…Ø¤Ù„Ù]\"</i>\n\nğŸ“– <b>Ù…Ù‚ØªØ±Ø­Ø§Øª Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©:</b>\nØ§Ø¨Ø¯Ø£ Ø¨Ù€: <i>[Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†]</i>",
        "options": {
          "systemMessage": "Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ Ø§Ù„Ø£Ø¯Ø¨ ÙˆØ§Ù„ÙƒØªÙ‘Ø§Ø¨. Ù…Ù‡Ù…ØªÙƒ ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø´Ø§Ù…Ù„Ø© ÙˆØ¯Ù‚ÙŠÙ‚Ø© Ø¹Ù† Ø§Ù„Ù…Ø¤Ù„ÙÙŠÙ†:\n\n1. Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø§Ù„Ù…Ø®ØªØµØ±Ø©\n2. Ø£Ù‡Ù… Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª\n3. Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ Ø§Ù„Ø£Ø¯Ø¨ÙŠ ÙˆØ§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹\n4. Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø£Ø¯Ø¨ÙŠ ÙˆØ§Ù„Ø«Ù‚Ø§ÙÙŠ\n5. ØªÙˆØµÙŠØ§Øª Ù„Ù„Ù‚Ø±Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø¯\n\nÙƒÙ†:\n- Ø¯Ù‚ÙŠÙ‚Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª\n- Ø´Ø§Ù…Ù„Ø§Ù‹ Ù„ÙƒÙ† Ù…Ø®ØªØµØ±Ø§Ù‹\n- Ù…ÙˆØ¶ÙˆØ¹ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…\n- Ù…Ù„Ù‡Ù…Ø§Ù‹ ÙÙŠ Ø§Ù„ÙˆØµÙ\n\nØ§Ø³ØªØ®Ø¯Ù… HTML Ù„Ù„ØªÙ†Ø³ÙŠÙ‚ ÙÙ‚Ø·."
        }
      },
      "id": "auth-004-chain",
      "name": "Generate Profile",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.4,
      "position": [480, 0]
    },
    {
      "parameters": {
        "jsCode": "// Format author profile\nconst inputData = $input.first().json;\nconst authorName = $('Extract Input').item.json.authorName;\n\nlet responseText = inputData.response || inputData.output || inputData.text || 'âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ù…Ø¤Ù„Ù';\n\n// Convert Markdown to HTML\nresponseText = responseText.replace(/\\*\\*(.+?)\\*\\*/g, '<b>$1</b>');\nresponseText = responseText.replace(/(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)/g, '<i>$1</i>');\nresponseText = responseText.replace(/__(.+?)__/g, '<b>$1</b>');\n\n// Extract famous books\nconst books = [];\nconst bookPattern = /\\d+\\.\\s*<i>(.+?)<\\/i>\\s*\\((.+?)\\)/g;\n\nlet match;\nwhile ((match = bookPattern.exec(responseText)) !== null) {\n  books.push({\n    title: match[1].trim(),\n    year: match[2].trim()\n  });\n}\n\n// Extract nationality\nconst nationalityMatch = responseText.match(/Ø§Ù„Ø¬Ù†Ø³ÙŠØ©:\\s*(.+?)(?=\\n|<)/i);\nconst nationality = nationalityMatch ? nationalityMatch[1].trim() : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';\n\n// Extract awards\nconst awardsMatch = responseText.match(/Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²:\\s*(.+?)(?=\\n\\n|<b>)/i);\nconst awards = awardsMatch ? awardsMatch[1].trim() : 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬ÙˆØ§Ø¦Ø² Ù…Ø³Ø¬Ù„Ø©';\n\n// Add footer\nresponseText += '\\n\\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\nğŸ“š <i>Ø§Ø·Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ù…Ø¤Ù„Ù Ø¢Ø®Ø± ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª!</i>';\n\nreturn [{\n  json: {\n    text: responseText,\n    parse_mode: 'HTML',\n    authorName: authorName,\n    nationality: nationality,\n    famousBooks: books,\n    booksCount: books.length,\n    awards: awards\n  }\n}];"
      },
      "id": "auth-005-format",
      "name": "Format Profile",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [720, 0]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "id": "auth-006-respond",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [960, 0]
    }
  ],
  "connections": {
    "Webhook Input": {
      "main": [
        [
          {
            "node": "Extract Input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Input": {
      "main": [
        [
          {
            "node": "Generate Profile",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mistral AI": {
      "ai_languageModel": [
        [
          {
            "node": "Generate Profile",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Generate Profile": {
      "main": [
        [
          {
            "node": "Format Profile",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Profile": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "tags": []
}
